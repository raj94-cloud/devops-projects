<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday üéâ</title>
  <style>
    :root{--bg1:#140035;--bg2:#050017;--card:#fff7;--accent:#ffce00}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,'Poppins',sans-serif;background:radial-gradient(circle at top,var(--bg1),var(--bg2) 70%);color:#fff}
    .wrap{min-height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:28px}
    .card{width:100%;max-width:980px;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));border-radius:18px;box-shadow:0 10px 40px rgba(0,0,0,.6);padding:20px;backdrop-filter:blur(6px)}
    header{display:flex;gap:16px;align-items:center}
    .title{font-size:32px;font-weight:700;margin:0}
    .subtitle{opacity:.75;margin:0}

    .gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;margin-top:16px}
    .photo{width:100%;height:180px;object-fit:cover;border-radius:12px;border:3px solid rgba(255,255,255,0.06);box-shadow:0 6px 18px rgba(0,0,0,.5)}

    .crackers{position:relative;margin-top:18px;height:120px}
    .firework{position:absolute;left:50%;transform:translateX(-50%)}

    .controls{display:flex;align-items:center;gap:12px;margin-top:16px}
    .btn{background:var(--accent);color:#000;padding:10px 14px;border-radius:12px;font-weight:600;border:none;cursor:pointer}

    /* big center overlay when autoplay blocked */
    .play-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(0deg,rgba(0,0,0,.55),rgba(0,0,0,.2));backdrop-filter:blur(3px);z-index:80;visibility:hidden;opacity:0;transition:all .25s}
    .play-overlay.show{visibility:visible;opacity:1}
    .play-overlay .box{background:rgba(255,255,255,0.06);padding:20px;border-radius:12px;text-align:center}
    .play-overlay .play{display:inline-block;margin-top:12px;padding:12px 18px;border-radius:999px;background:var(--accent);color:#000;font-weight:700;border:none}

    footer{opacity:.6;margin-top:18px;font-size:13px}

    @media (max-width:520px){.title{font-size:22px}.photo{height:140px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <div>
          <h1 class="title">Happy Birthday ‚Äî Aadya üéâ</h1>
          <p class="subtitle">Made with ‚ù§Ô∏è ‚Äî open this on mobile for the full effect</p>
        </div>
      </header>

      <div class="gallery" id="gallery">
        <!-- Images: upload these to your S3 bucket root as listed below -->
        <img class="photo" src="https://cloudfront-static2.s3.ap-south-1.amazonaws.com/aradya1.jpeg" alt="aradya1">
        <img class="photo" src="https://cloudfront-static2.s3.ap-south-1.amazonaws.com/aradya.jpeg" alt="aradya">
        <img class="photo" src="https://cloudfront-static2.s3.ap-south-1.amazonaws.com/aradya2.jpeg" alt="aradya2">
        <img class="photo" src="https://cloudfront-static2.s3.ap-south-1.amazonaws.com/aradya3.jpeg" alt="aradya3">
        <img class="photo" src="https://cloudfront-static2.s3.ap-south-1.amazonaws.com/rajuuuuuu.jpeg" alt="rajuuuuuu">
      </div>

      <div class="crackers" aria-hidden>
        <canvas id="fw" width="980" height="120" style="width:100%;height:120px"></canvas>
      </div>

      <div class="controls">
        <button id="muteBtn" class="btn">Mute / Unmute</button>
        <button id="confettiBtn" class="btn">Toggle Confetti</button>
        <div style="flex:1"></div>
        <small style="opacity:.8">Tip: If sound doesn't start, tap anywhere.</small>
      </div>

      <footer>Upload images to: <strong>cloudfront-static2 (root)</strong> ‚Äî example path: <code>/aradya2.jpeg</code></footer>
    </div>
  </div>

  <!-- Audio (upload your MP3 to the same S3 bucket root as shown below) -->
  <audio id="bgAudio" loop preload="auto" src="https://cloudfront-static2.s3.ap-south-1.amazonaws.com/happy_song.mp3"></audio>

  <!-- Small overlay that appears only if autoplay is blocked by the browser -->
  <div id="overlay" class="play-overlay" aria-hidden>
    <div class="box">
      <div style="font-size:18px;font-weight:700">Tap to play the song</div>
      <div style="margin-top:8px;opacity:.9">Autoplay with sound may be blocked by some browsers. Tap once to start.</div>
      <button id="playNow" class="play">Play</button>
    </div>
  </div>

  <script>
    // --------------------
    // Config: file list and S3 root
    // --------------------
    const S3_ROOT = 'https://cloudfront-static2.s3.ap-south-1.amazonaws.com/';
    const REQUIRED_FILES = ['aradya1.jpeg','aradya.jpeg','aradya2.jpeg','aradya3.jpeg','rajuuuuuu.jpeg','happy_song.mp3'];

    // --------------------
    // Audio autoplay attempt
    // --------------------
    const audio = document.getElementById('bgAudio');
    const overlay = document.getElementById('overlay');
    const playNow = document.getElementById('playNow');
    const muteBtn = document.getElementById('muteBtn');
    const confettiBtn = document.getElementById('confettiBtn');

    let confettiOn = true;

    function tryPlay() {
      audio.play().then(()=>{
        // playing succeeded
        overlay.classList.remove('show');
      }).catch((e)=>{
        // autoplay blocked ‚Äî show small overlay
        overlay.classList.add('show');
      });
    }

    // try autoplay on load (many browsers will block sound autoplay)
    window.addEventListener('load', ()=>{
      tryPlay();
    });

    // If overlay button clicked, play and hide overlay
    playNow.addEventListener('click', ()=>{
      audio.play().catch(()=>{}).finally(()=>overlay.classList.remove('show'));
    });

    // Mute toggle
    muteBtn.addEventListener('click', ()=>{
      audio.muted = !audio.muted;
      muteBtn.textContent = audio.muted ? 'Unmute' : 'Mute / Unmute';
    });

    // Confetti toggle (simple canvas firework)
    const canvas = document.getElementById('fw');
    const ctx = canvas.getContext('2d');
    let particles = [];

    function rand(min,max){return Math.random()*(max-min)+min}

    function spawn(){
      for(let i=0;i<20;i++){
        particles.push({x:rand(100,canvas.width-100),y:canvas.height,dx:rand(-2,2),dy:rand(-6,-2),life:rand(40,120),r:rand(1,3)})
      }
    }

    function step(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      particles.forEach((p,i)=>{
        p.x+=p.dx; p.y+=p.dy; p.dy+=0.12; p.life--;
        ctx.beginPath(); ctx.fillStyle='rgba(255,205,60,0.9)'; ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
        if(p.life<=0) particles.splice(i,1);
      });
      requestAnimationFrame(step);
    }
    step(); spawn();
    confettiBtn.addEventListener('click', ()=>{ if(confettiOn){particles=[];confettiOn=false;confettiBtn.textContent='Start Confetti'} else {confettiOn=true;spawn();confettiBtn.textContent='Toggle Confetti'}});

    // click anywhere to try play if overlay visible
    document.addEventListener('click',(e)=>{
      if(overlay.classList.contains('show')){
        audio.play().catch(()=>{}).finally(()=>overlay.classList.remove('show'));
      }
    });

    // Responsive canvas resize
    function resizeCanvas(){
      canvas.width = canvas.clientWidth * devicePixelRatio;
      canvas.height = 120 * devicePixelRatio;
    }
    window.addEventListener('resize', resizeCanvas); resizeCanvas();

    // Basic file existence check (helps you debug missing uploads)
    (async function checkFiles(){
      for(const f of REQUIRED_FILES){
        try{
          const res = await fetch(S3_ROOT+f,{method:'HEAD'});
          if(!res.ok) console.warn('Missing or inaccessible:', f, res.status);
        }catch(err){console.warn('Error checking', f, err)}
      }
    })();
  </script>
</body>
</html>
